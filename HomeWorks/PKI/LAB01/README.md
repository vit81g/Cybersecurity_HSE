# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 1 ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é OpenSSL

**–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:** –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è / –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–π –∏ —Å–∏—Å—Ç–µ–º  
**–¢–µ–º–∞:** –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ X.509  
**–ê–≤—Ç–æ—Ä:** Vitaliy Novikov, –≥—Ä—É–ø–ø–∞ –ú–ö–ë241  
**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 08.10.2025  

---

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ò–∑—É—á–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ X.509 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenSSL.  
–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é –¥–æ–≤–µ—Ä–∏—è –∏–∑ —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω–µ–π:

1. **–ö–æ—Ä–Ω–µ–≤–æ–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Root CA)** ‚Äî *HSE Root Certification Authority*  
2. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Group CA)** ‚Äî *MKB241 Group Certification Authority*  
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** ‚Äî *Vitaliy Novikov*  

---

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **OpenSSL 1.0.2j-FIPS (2016)**  
- **Windows 10 / 11**  
- **certmgr.msc** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤  
- **cmd / bat script** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
PKI/
 ‚îú‚îÄ‚îÄ LAB01/
 ‚îÇ   ‚îú‚îÄ‚îÄ conf/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
 ‚îÇ   ‚îÇ    ‚îú‚îÄ‚îÄ do_it.bat
 ‚îÇ   ‚îÇ    ‚îú‚îÄ‚îÄ openssl.cnf
 ‚îÇ   ‚îÇ    ‚îî‚îÄ‚îÄ vm.txt
 ‚îÇ   ‚îÇ
 ‚îÇ   ‚îú‚îÄ‚îÄ cert/         # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
 ‚îÇ   ‚îÇ    ‚îú‚îÄ‚îÄ rootca.crt
 ‚îÇ   ‚îÇ    ‚îú‚îÄ‚îÄ groupmca.crt
 ‚îÇ   ‚îÇ    ‚îî‚îÄ‚îÄ usercert.crt
 ‚îÇ   ‚îÇ
 ‚îÇ   ‚îî‚îÄ‚îÄ screens/      # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å–≤–æ–π—Å—Ç–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
 ‚îÇ        ‚îú‚îÄ‚îÄ cert01.jpg
 ‚îÇ        ‚îú‚îÄ‚îÄ cert02.jpg
 ‚îÇ        ‚îú‚îÄ‚îÄ cert03.jpg
 ‚îÇ        ‚îú‚îÄ‚îÄ Details_RootCA.jpg
 ‚îÇ        ‚îú‚îÄ‚îÄ Details_MKB241.jpg
 ‚îÇ        ‚îî‚îÄ‚îÄ Details_User.jpg
```

---

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã

1. **Root CA (–í–®–≠):**  
   —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ `basicConstraints = CA:true`, `keyUsage = keyCertSign, cRLSign`.  

2. **Group CA (–ú–ö–ë241):**  
   –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è Root CA, —Å–æ–¥–µ—Ä–∂–∏—Ç `basicConstraints = CA:true, pathlen:0`,  
   –∞ —Ç–∞–∫–∂–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω:  
   ```
   Name Constraints ‚Üí –ò–º—è RFC822 = edu.hse.ru
   ```  

3. **User Certificate (Vitaliy Novikov):**  
   —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è Group CA.  
   –í–∫–ª—é—á–∞–µ—Ç:
   - `keyUsage = dataEncipherment, keyEncipherment, digitalSignature`
   - `extendedKeyUsage = emailProtection`
   - `subjectKeyIdentifier` –∏ `authorityKeyIdentifier`

---

## üßæ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

–§–∞–π–ª [`conf/do_it.bat`](../conf/do_it.bat)  
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

- –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–ª—é—á–µ–π –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤;
- –ø–æ–¥–ø–∏—Å—å –ø–æ–¥—á–∏–Ω—ë–Ω–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤;
- —Å–±–æ—Ä–∫—É —Ü–µ–ø–æ—á–∫–∏ `rootca ‚Üí groupmca ‚Üí usercert`;
- –∏–º–ø–æ—Ä—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Windows —á–µ—Ä–µ–∑ `certutil`.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenSSL

–§–∞–π–ª [`conf/openssl.cnf`](../conf/openssl.cnf)  
—Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –≤–∫–ª—é—á–∞—è `v3_mca` —Å –ø–æ–ª–µ–º `nameConstraints`:

```ini
[ v3_mca ]
basicConstraints = critical, CA:true, pathlen:0
keyUsage = critical, keyCertSign, cRLSign
extendedKeyUsage = emailProtection
nameConstraints = permitted;email:edu.hse.ru
```

---

## üñºÔ∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã

| –£—Ä–æ–≤–µ–Ω—å | –°–æ—Å—Ç–∞–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ | –í–∫–ª–∞–¥–∫–∞ |
|----------|--------------------|----------|
| üü© Root CA | ![Root CA Details](../screens/Details_RootCA.jpg) | –°–æ—Å—Ç–∞–≤ |
| üü® Group CA | ![Group CA Details](../screens/Details_MKB241.jpg) | –°–æ—Å—Ç–∞–≤ |
| üü¶ User Cert | ![User Cert Details](../screens/Details_User.jpg) | –°–æ—Å—Ç–∞–≤ |

| –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ certmgr.msc | –ü—Ä–∏–º–µ—Ä —Ü–µ–ø–æ—á–∫–∏ |
|----------------------------|----------------|
| ![Cert 01](../screens/cert01.jpg) | ![Cert 02](../screens/cert02.jpg) |

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- –¶–µ–ø–æ—á–∫–∞ –∏–∑ —Ç—Ä—ë—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Windows.  
- –í—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.  
- –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.  
- –¶–µ–ª—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞.

---

## üìö –ê–≤—Ç–æ—Ä
**Vitaliy Novikov**  
–ù–ò–£ –í–®–≠, –≥—Ä—É–ø–ø–∞ –ú–ö–ë241
